<!DOCTYPE html>
<html>
    <head>
        <title> Budget App</title>
    </head>
    <body>
        <main style="background-color:whitesmoke ; height: 100%;">
         <header style="background-color: whitesmoke; padding: 8px;overflow: auto;">
          <strong style="display: block; font-size: 24px;">Logo Here</strong>
          <section style="float: left;width:50%;">
              <img src="./assets/images/3.jpg" width="100" height="100" style="float:left;margin-right: 10px;"/>
                <div style="float:left;">
                    <h3>John Doe</h3>
                    <button style="padding: 4px;background:greenyellow; cursor:pointer;" onClick="showForm()">ADD EXPENSE</button>
                    <button style="padding: 4px;background:greenyellow; cursor:pointer;" onClick="showExpense()">SHOW EXPENSE</button> 
                </div>
          </section>
          <section style="float: right;width:50%;">
            <div style="float: right;text-align:right;">
               <h3>Total Budget</h3>
               <h2 class="budget">100000 KS</h2> 
            </div>
          </section>   
         </header>
         <hr/>
         
         <div style="text-align:center;float:right;width:50%;">
            <h4 style="text-align:center;"></h4>
            <strong id="expenseTitle"></strong>
            <strong id="expenseAmount"></strong>
         </div>
         <div style="float:left;width:50%;" id="expenseScreen">
             <h3>Your Expenses</h3>
             <table border="1" id="expenseTable" style="width: 100;">
                <tr>
                    <th>Title</th>
                    <th>Amount</th>
                </tr>
            
            
            </table>
         </div>
        </main>
    </body>
</html>
<script>
    // function expression
    function showForm() {
        let expenseTitle= window.prompt('Please Enter Expense Title');
        let expenseAmount= window.prompt('Please Enter Your New Expense');
        //isNaN is not a number => return true/false
        if (isNaN(expenseAmount)) {
           window.alert("Invalid")
            return;
        }
        let totalBudget = document.getElementsByClassName('budget');
        totalBudget[0].innerHTML = parseInt(totalBudget[0].innerHTML.replace(' KS', ''))-parseInt(expenseAmount) + ' KS'
        // getElementsByTabName return array of selected tag name element
        let resultElements = document.getElementsByTagName('h4');
        resultElements[0].innerHTML = 'Your new expense';
        document.getElementById('expenseTitle').innerHTML = expenseTitle + ':'
        document.getElementById('expenseAmount').innerHTML = expenseAmount
        let newExpense={
            'title':expenseTitle,'amount':expenseAmount
        };//js object
        let totalExpense=[];//js object(array)
        if(localStorage.getItem('expenses')) {
            totalExpense=JSON.parse(localStorage.getItem('expenses'))
        }
        totalExpense.push(newExpense)//js object(array)
        console.log(totalExpense)//js object
        window.localStorage.setItem("expenses",JSON.stringify(totalExpense));
        appendToExpenses(newExpense)

    
    }
    function showExpense(){
        let expenseScreen=document.getElementById("expenseScreen")
        expenseScreen.style.display="bolck"
        let expenseLiist=document.getElementById("expenseList")
        let totalresult=localStorage.getItem("expense")
        expenseLiist.innerHTML=totalresult
    }
    function initiateExpenses(){
        let totalExpense =JSON.parse(localStorage.getItem('expenses')) // [];
        // check expenses length
        if (totalExpense.length > 0){
            for (i=0; i< totalExpense.length; i++) {
                appendToExpenses(totalExpense[i]);
            }
        }
    }
    function appendToExpenses(expenseObj) {
        let expenseTable = document.getElementById('expenseTable');
        let trElement = document.createElement('tr');
        let titleTd = document.createElement('td');
        let amountTd = document.createElement('td');
        let title = document.createTextNode(expenseObj.title)
        let amount = document.createTextNode(expenseObj.amount)
        titleTd.appendChild(title)
        amountTd.appendChild(amount)
        trElement.appendChild(titleTd)
        trElement.appendChild(amountTd)
        expenseTable.appendChild(trElement);
    }
    

    
     
</script>